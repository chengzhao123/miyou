{"version":3,"sources":["webpack:///./src/utils/validator.js","webpack:///./src/views/fourth/childComp/changePwd.vue?7a0e","webpack:///src/views/fourth/childComp/changePwd.vue","webpack:///./src/views/fourth/childComp/changePwd.vue?a0aa","webpack:///./src/views/fourth/childComp/changePwd.vue","webpack:///./src/api/user.js"],"names":["validateTel","tel","reg","test","render","_vm","this","_h","$createElement","_c","_self","attrs","model","value","callback","$$v","expression","password","rpassword","on","handleSubmit","_v","staticRenderFns","name","data","computed","methods","mounted","userInfo","component","userReg","post","userLogin","userUpdate","userForget","userChangePwd","userMibaoSet","userForgetTel","userForgetAnswer"],"mappings":"kHAYO,SAASA,EAAYC,GAC3B,IAAIC,EAAM,+BACV,OAAOA,EAAIC,KAAKF,GAdjB,mC,2CCAA,IAAIG,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,iBAAiB,CAACA,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ,MAAM,SAAW,IAAIC,MAAM,CAACC,MAAOR,EAAO,IAAES,SAAS,SAAUC,GAAMV,EAAIJ,IAAIc,GAAKC,WAAW,SAASP,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAW,UAAY,IAAI,OAAS,GAAG,UAAY,GAAG,YAAc,SAAS,MAAQ,OAAOC,MAAM,CAACC,MAAOR,EAAY,SAAES,SAAS,SAAUC,GAAMV,EAAIY,SAASF,GAAKC,WAAW,cAAcP,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAW,UAAY,IAAI,OAAS,GAAG,UAAY,GAAG,YAAc,WAAW,MAAQ,OAAOC,MAAM,CAACC,MAAOR,EAAa,UAAES,SAAS,SAAUC,GAAMV,EAAIa,UAAUH,GAAKC,WAAW,eAAeP,EAAG,aAAa,CAACE,MAAM,CAAC,MAAQ,UAAU,MAAQ,IAAIQ,GAAG,CAAC,MAAQd,EAAIe,eAAe,CAACf,EAAIgB,GAAG,WAAW,IAAI,IACryBC,EAAkB,G,oFCoBtB,GACEC,KAAM,WACNC,KAFF,WAGI,MAAO,CACLvB,IAAK,YACLgB,SAAU,GACVC,UAAW,KAGfO,SAAU,OAAZ,OAAY,CAAZ,GACA,8BAEEC,QAAS,OAAX,OAAW,CAAX,GACA,mCADA,CAEI,aAFJ,WAEA,mKACA,MADA,uBAEA,0BAFA,6BAKA,sBALA,uBAMA,0BANA,6BASA,WATA,uBAUA,yBAVA,6BAaA,yBAbA,wBAcA,0BAdA,8BAiBA,2BAjBA,wBAkBA,8BAlBA,kCAqBA,GACA,UACA,oBACA,uBAxBA,UA0BA,kBA1BA,QA0BA,EA1BA,OA2BA,GACA,aACA,yBACA,6BAEA,2BAEA,0BAEA,cACA,eArCA,iDAwCEC,QAtDF,WAuDIrB,KAAKL,IAAMK,KAAKsB,SAAS3B,KAAOK,KAAKL,MC5EwU,I,YCO7W4B,EAAY,eACd,EACAzB,EACAkB,GACA,EACA,KACA,WACA,MAIa,aAAAO,E,iWCfR,SAAeC,EAAtB,kC,8DAAO,WAAuBlB,GAAvB,iGACUmB,eAAK,WAAYnB,GAD3B,mF,wBAIA,SAAeoB,EAAtB,kC,8DAAO,WAAyBpB,GAAzB,iGACUmB,eAAK,aAAcnB,GAD7B,mF,wBAIA,SAAeqB,EAAtB,kC,8DAAO,WAA0BrB,GAA1B,iGACUmB,eAAK,cAAenB,GAD9B,mF,wBAIA,SAAesB,EAAtB,kC,8DAAO,WAA0BtB,GAA1B,iGACUmB,eAAK,cAAenB,GAD9B,mF,wBAIA,SAAeuB,EAAtB,kC,8DAAO,WAA6BvB,GAA7B,iGACUmB,eAAK,iBAAkBnB,GADjC,mF,wBAIA,SAAewB,EAAtB,kC,8DAAO,WAA4BxB,GAA5B,iGACUmB,eAAK,gBAAiBnB,GADhC,mF,wBAIA,SAAeyB,EAAtB,kC,8DAAO,WAA6BzB,GAA7B,iGACUmB,eAAK,iBAAkBnB,GADjC,mF,wBAIA,SAAe0B,EAAtB,kC,8DAAO,WAAgC1B,GAAhC,iGACUmB,eAAK,oBAAqBnB,GADpC,mF","file":"assets/js/chunk-216af578.js","sourcesContent":["/**\r\n * 验证整数\r\n * @param {Object} number\r\n */\r\nexport function validateNumber(number) {\r\n\tvar reg = /^[0-9]*[0-9][0-9]*$/;\r\n\treturn reg.test(number);\r\n}\r\n/**\r\n * 验证手机号码\r\n * @param {Object} tel\r\n */\r\nexport function validateTel(tel) {\r\n\tvar reg = /^1[3|4|5|6|7|8|9][0-9]\\d{8}$/;\r\n\treturn reg.test(tel);\r\n}\r\n\r\n/**\r\n * 验证座机或者手机号码\r\n * @param {Object} phone\r\n */\r\nexport function validatePhoneOrTel(phone) {\r\n\tvar reg = /^(((\\+\\d{2}-)?0\\d{2,3}-\\d{7,8})|((\\+\\\\d{2}-)?(\\d{2,3}-)?([1][3,4,5,6,7,8,9][0-9]\\d{8})))$/;\r\n\treturn reg.test(phone);\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-cell-group',[_c('van-field',{attrs:{\"label\":\"手机号\",\"readonly\":\"\"},model:{value:(_vm.tel),callback:function ($$v) {_vm.tel=$$v},expression:\"tel\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"maxlength\":\"6\",\"center\":\"\",\"clearable\":\"\",\"placeholder\":\"请输入新密码\",\"label\":\"新密码\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"maxlength\":\"6\",\"center\":\"\",\"clearable\":\"\",\"placeholder\":\"请再次输入新密码\",\"label\":\"新密码\"},model:{value:(_vm.rpassword),callback:function ($$v) {_vm.rpassword=$$v},expression:\"rpassword\"}}),_c('van-button',{attrs:{\"color\":\"#00887a\",\"block\":\"\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"确定提交\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 正文 -->\r\n    <van-cell-group>\r\n      <van-field v-model=\"tel\" label=\"手机号\" readonly />\r\n      <van-field v-model=\"password\" type=\"password\" \r\n        maxlength=\"6\" center clearable\r\n        placeholder=\"请输入新密码\" label=\"新密码\"/>\r\n      <van-field v-model=\"rpassword\" type=\"password\" \r\n        maxlength=\"6\" center clearable\r\n        placeholder=\"请再次输入新密码\" label=\"新密码\"/>\r\n      <van-button color=\"#00887a\" block @click=\"handleSubmit\">确定提交</van-button>\r\n    </van-cell-group>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Toast } from \"vant\";\r\nimport { validateTel } from \"@/utils/validator\";\r\nimport {mapState, mapMutations} from 'vuex';\r\nimport { userChangePwd } from '@/api/user'\r\nexport default {\r\n  name: \"userinfo\",\r\n  data() {\r\n    return {\r\n      tel: 18782788443,\r\n      password: '',\r\n      rpassword: ''\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState(['userInfo'])\r\n  },\r\n  methods: {\r\n    ...mapMutations(['updateUserInfo']),\r\n     async handleSubmit() {\r\n      if (!this.tel) {\r\n        Toast(\"手机号不能为空\");\r\n        return;\r\n      }\r\n      if (!validateTel(this.tel)) {\r\n        Toast(\"手机号格式错误\");\r\n        return;\r\n      }\r\n      if (!this.password) {\r\n        Toast(\"密码不能为空\");\r\n        return;\r\n      }\r\n      if (this.password !== this.rpassword) {\r\n        Toast(\"两次密码不一致\");\r\n        return;\r\n      }\r\n      if(this.password == this.userInfo.tel) {\r\n        Toast(\"新密码和原密码不能相同\");\r\n        return;\r\n      }\r\n      let model = {\r\n          tel: this.tel,\r\n          password: this.password,\r\n          rpassword: this.rpassword\r\n      }\r\n      let res = await userChangePwd(model);\r\n      if (res) {\r\n        if (res.type === 1) {//修改成功\r\n          this.updateUserInfo(res.data)\r\n          this.$router.push('/password')\r\n        }\r\n        Toast(res.message);\r\n      } else {\r\n        Toast(\"似乎出现了错误\");\r\n      }\r\n      this.password = \"\"\r\n      this.rpassword = \"\"\r\n    },\r\n  },\r\n  mounted() {\r\n    this.tel = this.userInfo.tel || this.tel;\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./changePwd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./changePwd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./changePwd.vue?vue&type=template&id=6ced8072&scoped=true&\"\nimport script from \"./changePwd.vue?vue&type=script&lang=js&\"\nexport * from \"./changePwd.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6ced8072\",\n  null\n  \n)\n\nexport default component.exports","import {get, post} from '@/utils/request'\r\n\r\n// 注册账号\r\nexport async function userReg(model) {\r\n    return await post('user/reg', model)\r\n}\r\n// 登录账号\r\nexport async function userLogin(model) {\r\n    return await post('user/login', model)\r\n}\r\n// 用户更新个人资料\r\nexport async function userUpdate(model) {\r\n    return await post('user/update', model)\r\n}\r\n// 用户忘记密码\r\nexport async function userForget(model) {\r\n    return await post('user/forget', model)\r\n}\r\n// 用户修改密码\r\nexport async function userChangePwd(model) {\r\n    return await post('user/changePwd', model)\r\n}\r\n// 用户修改密保\r\nexport async function userMibaoSet(model) {\r\n    return await post('user/mibaoSet', model)\r\n}\r\n// 判断用户注册没有\r\nexport async function userForgetTel(model) {\r\n    return await post('user/forgetTel', model)\r\n}\r\n// 判断用户输入的密保答案是否正确\r\nexport async function userForgetAnswer(model) {\r\n    return await post('user/forgetAnswer', model)\r\n}"],"sourceRoot":""}