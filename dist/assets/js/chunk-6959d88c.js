(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6959d88c"],{"155b":function(t,e,s){t.exports=s.p+"assets/img/womanf.png"},2783:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"chatcontent"},[s("ul",t._l(t.infobox,(function(e,i){return s("li",{key:i},[s("div",{staticClass:"time"},[t._v(t._s(e.time))]),0===e.type?s("div",{staticClass:"mine_box"},[s("div",{staticClass:"imgbox"},[s("img",{staticClass:"img",attrs:{src:t.imgbox[t.userInfo.headimg||0].src,alt:""}})]),s("div",{staticClass:"mine_msg"},[s("div",{staticClass:"mine_info",domProps:{innerHTML:t._s(e.content)}})])]):1===e.type?s("div",{staticClass:"other_box"},[s("div",{staticClass:"imgbox"},[s("img",{staticClass:"img",attrs:{src:t.imgbox[t.$route.query.id.headimg||0].src,alt:""}})]),s("div",{staticClass:"other_msg"},[s("div",{staticClass:"other_info",domProps:{innerHTML:t._s(e.content)}})])]):t._e()])})),0)]),s("div",{staticClass:"btn_btm"},[s("van-search",{staticClass:"search_box",attrs:{shape:"round","left-icon":""},on:{focus:t.softTe},model:{value:t.info,callback:function(e){t.info="string"===typeof e?e.trim():e},expression:"info"}}),s("van-button",{staticClass:"search_btn",attrs:{round:"",color:"#00887a",disabled:0==t.info.length,size:"mini"},on:{click:t.searchbtn}},[t._v("发送")])],1)])},n=[],o=s("5530"),a=s("2f62"),c=s("d399"),l={nmae:"chatinfo",data:function(){return{info:"",infobox:[],date:"",imgbox:[{id:0,src:s("7f56")},{id:1,src:s("155b")},{id:2,src:s("dafb")},{id:3,src:s("9071")}]}},computed:Object(o["a"])({},Object(a["c"])(["userInfo"])),methods:Object(o["a"])({},Object(a["b"])(["clearNewMsg","addNewMsg"]),{searchbtn:function(){var t=(new Date).getFullYear(),e=(new Date).getMonth()+1,s=(new Date).getDate(),i=(new Date).getHours(),n=(new Date).getMinutes(),o=(new Date).getSeconds(),a=null;a=i>=12?"下午":"早上",i<10&&(i="0"+i),o<10&&(o="0"+o),0==i&&(i=12),n<10&&(n="0"+n),e<10&&(e="0"+e);var l=t+"/"+e+"/"+s+" "+a+i+":"+n+":"+o;if(this.info.length){this.infobox.push({content:this.info,time:l,tel:this.userInfo.tel,histel:this.$route.query.id.tel,type:0}),this.$socket.emit("sendMsg",{content:this.info,time:l,tel:this.userInfo.tel,histel:this.$route.query.id.tel,type:0}),this.info="","/chatinfo"==this.$route.path&&this.scrollToBottom(),localStorage.setItem(this.$route.query.id.tel,JSON.stringify(this.infobox));var r=document.getElementsByClassName("chatcontent")[0].style.height;document.getElementsByClassName("chatcontent")[0].style.height=r-50+"px"}else Object(c["a"])("不能输入空值")},scrollToBottom:function(){"/chatinfo"==this.$route.path&&setTimeout((function(){var t=document.getElementsByClassName("chatcontent")[0];t.scrollTop=t.scrollHeight||0}),100)},softTe:function(){var t=document.getElementsByClassName("chatcontent")[0].style.height;document.getElementsByClassName("chatcontent")[0].style.height=t-45+"px"},getMsg:function(){var t=this;this.$socket.removeAllListeners("getMsg"),this.$socket.on("getMsg",(function(e){"/chatinfo"==t.$route.path&&t.$route.query.id.tel==e.tel&&e.histel===t.userInfo.tel&&(e.type=1,t.infobox.push(e),localStorage.setItem(e.tel,JSON.stringify(t.infobox)),t.scrollToBottom())})),this.$socket.removeAllListeners("NotFriends"),this.$socket.on("NotFriends",(function(e){"/chatinfo"==t.$route.path&&e.tel==t.userInfo.tel&&(Object(c["a"])("他不是你好友，请加好友后联系"),t.clearNewMsg(e.histel),localStorage.removeItem(e.histel))}))},init:function(){var t=localStorage.getItem(this.$route.query.id.tel)||[];if(t.length>0){var e=JSON.parse(t);if(e.length>30){for(var s=[],i=e.length-30;i<e.length;i++)s.push(e[i]);this.infobox=s}else this.infobox=e;this.scrollToBottom()}}}),created:function(){this.clearNewMsg(this.$route.query.id.tel),this.getMsg(),this.init()}},r=l,h=(s("a2a7"),s("2877")),u=Object(h["a"])(r,i,n,!1,null,"742e700a",null);e["default"]=u.exports},"2c6f":function(t,e,s){},"7f56":function(t,e,s){t.exports=s.p+"assets/img/manf.png"},9071:function(t,e,s){t.exports=s.p+"assets/img/womans.png"},a2a7:function(t,e,s){"use strict";var i=s("2c6f"),n=s.n(i);n.a},dafb:function(t,e,s){t.exports=s.p+"assets/img/mans.png"}}]);
//# sourceMappingURL=chunk-6959d88c.js.map